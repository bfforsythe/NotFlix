<!-- Loop a function that adds continuous images based on how many urls they are
     the urls function as hyperlinks to an image, on click redirect to watchPage, easy. -->
<style>
    Body {
        background: rgb(45,160,184);
        background: linear-gradient( rgba(45,160,184,1) 2%, rgba(2,0,36,0.7792366946778712) 16%, rgba(9,115,121,1) 92%);
        }
        .slideshow-group {
        display: flex;
        justify-content: center;
        }
</style>

<%- include('./partials/carousel.ejs') %>

<body>

    <%- include('./partials/nav.ejs') %>
    <%- include('./partials/userCheck.ejs') %>


    
    <div id="action-slides" class="slideshow-container">
      <p1>Action</p1>
        <% for (let i = 0; i < newMovieGenres.Action.length; i += 100) { %>
          <div class="slideshow-group">
            <% for (let j = i; j < i + 100 && j < newMovieGenres.Action.length; j++) { %>
                <div class="mySlides fade">
                        <img height="100px" width="200px" src="https://i.ytimg.com/vi/<%= newMovieGenres.Action[j] %>/maxresdefault.jpg" onclick="storeURL('<%= newMovieGenres.Action[j] %>')">
                    </div>  
            <% } %>
          
        <% } %>
        <a class="prev" onclick="plusSlides(-1, slideshow1)">❮</a>
        <a class="next" onclick="plusSlides(1, slideshow1)">❯</a>
      </div>
    </div>

      <!-- Horror Slides -->

      
      <div id="horror-slides" class="slideshow-container">
        <p1> Horror </p1>
        <% for (let i = 0; i < newMovieGenres.Horror.length; i += 100) { %>
          <div class="slideshow-group">
            <% for (let j = i; j < i + 100 && j < newMovieGenres.Horror.length; j++) { %>
                <div class="mySlides fade">
                        <img height="100px" width="200px" src="https://i.ytimg.com/vi/<%= newMovieGenres.Horror[j] %>/maxresdefault.jpg" onclick="storeURL('<%= newMovieGenres.Horror[j] %>')">
                    </div>  
            <% } %>
          
        <% } %>
        <a class="prev" onclick="plusSlides(-1,slideshow2)">❮</a>
        <a class="next" onclick="plusSlides(1,slideshow2)">❯</a>
        </div>
      </div>

      <!-- Romance Slides -->

      
      <div id="romance-slides" class="slideshow-container">
        <p1> Romance </p1>
        <% for (let i = 0; i < newMovieGenres.Romance.length; i += 100) { %>
          <div class="slideshow-group">
            <% for (let j = i; j < i + 100 && j < newMovieGenres.Romance.length; j++) { %>
                <div class="mySlides fade">
                        <img height="100px" width="200px" src="https://i.ytimg.com/vi/<%= newMovieGenres.Romance[j] %>/maxresdefault.jpg" onclick="storeURL('<%= newMovieGenres.Romance[j] %>')">
                    </div>  
            <% } %>
          
        <% } %>
        <center>
        <a class="prev" onclick="plusSlides(-1,slideshow3)">❮</a>
        <a class="next" onclick="plusSlides(1,slideshow3)">❯</a>
      </center>
        </div>
      </div>


</body>


<script>


function storeURL(url) {
    localStorage.setItem("retrievedURL", url);
    console.log("URL STORED!", url);
    const newUrl = `/watchPage/${url}`;
    window.location.href = newUrl;
}

var slideshow1 = document.getElementById("action-slides");
  slideshow1.currentSlideIndex = 1;
  showSlides(slideshow1.currentSlideIndex, slideshow1);
  
  var slideshow2 = document.getElementById("horror-slides");
  slideshow2.currentSlideIndex = 1;
  showSlides(slideshow2.currentSlideIndex, slideshow2);
  
  var slideshow3 = document.getElementById("romance-slides");
  slideshow3.currentSlideIndex = 1;
  showSlides(slideshow3.currentSlideIndex, slideshow3);
  
  
  function plusSlides(n, slideshow) {
    showSlides(slideshow.currentSlideIndex += n, slideshow);
    console.log("MOVING SLIDES!!!!");
  }
  
  function currentSlide(n, slideshow) {
    showSlides(slideshow.currentSlideIndex = n, slideshow);
  }
  
  
  
function showSlides(n, slideshow) {
  slideshow.currentSlideIndex = n;
  var i;
  var slides = slideshow.getElementsByClassName("mySlides");
  var startIndex = (n - 1) * 4;
  var endIndex = startIndex + 4;
  if (endIndex > slides.length) {
    endIndex = slides.length;
    startIndex = endIndex - 4;
  }
  for (i = 0; i < slides.length; i++) {
    if (i >= startIndex && i < endIndex) {
      slides[i].style.display = "block";
    } else {
      slides[i].style.display = "none";
    }
  }
}


</script>